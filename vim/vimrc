language messages en_US 
set encoding=utf-8

" Get rid of legacy stuff
set nocompatible
set backspace=indent,eol,start


" Take me to where I was when last edited a file
au BufReadPost * if line("'\"") > 0 && line("'\"") <= line("$") | exe "normal g'\"" | endif

" Hide buffers instead of closing them
set hidden

" Turn on syntax highlight and show line numbers by default
syntax on
set nu

" Use system clipboard 
set clipboard=unnamed

" Enable mouse support
if has('mouse')
  set mouse=a
endif

" Turn off annoying beep sound
set visualbell
set noerrorbells

" NOTE: Shall think about better backup strategy
set nobackup
set noswapfile

" Moar history
set history=500
" Moar undo levels
set undolevels=500

" Permanent ruler
set ruler
" Ruller: flags [format, encoding, type] line, col linesL
set rulerformat=%50(%=%m%r%w\ %#comment#[%{&ff},\ %{strlen(&fenc)?&fenc:&enc},\ %{&ft}]%*\ %03l,%03c\ %03LL%)


set showcmd
" Highlight current line
set cursorline

" Search settings
set incsearch
set ignorecase
set smartcase
set hlsearch

" Indentation settings
filetype plugin indent on
autocmd FileType text setlocal textwidth=79
set tabstop=4
set shiftwidth=4
set smarttab
set expandtab
" ruby specific
:autocmd Filetype ruby set softtabstop=2
:autocmd Filetype ruby set shiftwidth=2
:autocmd Filetype ruby set tabstop=2

let python_highlight_all=1

" Sane regexp syntax in search mode
nnoremap / /\v
vnoremap / /\v

" Remap <leader> to , key
let mapleader = ","

" Pretty special characters highlighting
set listchars=tab:▸\ ,eol:¬ 
autocmd filetype html,xml set listchars-=tab:▸\ ,eol:¬ 
highlight SpecialKey guifg=#505070
" Toggle whitespace highlighting
nmap <silent> <leader>l :set list!<CR> 

" Clear highlighted search results on Return pressed in command mode
nnoremap <silent> <CR> :noh<CR><CR>

" Jump over visual rows in wrapped text, not actual lines
nnoremap j gj
nnoremap k gk

" For more rapid command insertion
nnoremap ; :

" More convenient way to return to normal mode from insert mode
inoremap jj <ESC>

" Delete to the end of line
nmap D d$

" Call CommandT
nnoremap <leader>t :CommandT<CR>
" fixing ESC in OS X terminal
"let g:CommandTCancelMap=['<ESC>','<C-c>']
let g:CommandTMaxHeight=15

" Use <tab> to jump to matching bracket
nnoremap <tab> %
vnoremap <tab> %

" Edit and reload vimrc (this file)
nmap <silent> <leader>ev :e $MYVIMRC<CR>
nmap <silent> <leader>sv :so $MYVIMRC<CR>

" Show YankRing buffers list
nnoremap <silent> <leader>pp :YRShow<CR>
inoremap <silent> <leader>pp :YRShow<CR>

" Change working directory automatically
"set autochdir

if has("gui_running")
    " Hide the mouse when typing text
    set mousehide 

    " Get rid of toolbar
    set guioptions-=T 

    " Set fancy font
    if has("gui_mac") || has("gui_macvim")
        set gfn=Andale\ Mono:h13
        set fuoptions=background:Normal
    endif

    if has("gui_win32") || has("gui_win32s")
        set gfn=Consolas:h10.5:cDEFAULT 
    endif
endif

colorscheme molokai

" Strip whitespace in file
function! StripWhitespace ()
    exec ':%s/ \+$//gc'
endfunction
map <leader>s :call StripWhitespace ()<CR>

" Resize splits when the window is resized
au VimResized * exe "normal! \<c-w>="



" Heresy
inoremap <c-e> <esc>I
inoremap <c-a> <esc>A
